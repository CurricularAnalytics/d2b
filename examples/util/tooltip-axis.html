<!DOCTYPE html>
<html>
<script src="https://d3js.org/d3.v4.0.0-alpha.29.min.js"></script>

<link rel="stylesheet" type="text/css" href="../../../build/d2b.css" />
<script src="../../../build/d2b.js"></script>

<body style='padding: 100px;'>

<svg></svg>

<script>
  var width = 960, height = 500;

  var x = d3.scaleLinear().domain([0, 70]).range([0, 960]);
  var y = d3.scaleLinear().domain([0, 60]).range([0, 500]);
  var xAxis = d3.axisBottom().scale(x);
  var yAxis = d3.axisRight().scale(y);

  // chart svg, will also be used as the mouse tracker
	var svg = d3.select('svg')
      .attr('width', width)
      .attr('height', height)
    .append('g');

  // Tooltip svg container. This will be used to draw tooltip guides.
  var svgContainer = svg.append('g');

  // svg background so that all mousemove events are captured
  var svgBackground = svg.append('rect')
      .attr('width', width)
      .attr('height', height)
      .attr('opacity', 0);

  // first graph
  var dotOneData = [
    {x: 10, y: 25},
    {x: 20, y: 15},
    {x: 30, y: 35},
    {x: 40, y: 52},
    {x: 50, y: 41},
    {x: 60, y: 18}
  ];
  var dot = svg.selectAll('.dot-one').data(dotOneData);
  dot.enter()
    .append('circle')
      .attr('class', 'dot-one')
      .attr('r', 10)
      .attr('fill', 'blue')
      .attr('cx', function (d) {return x(d.x);})
      .attr('cy', function (d) {return y(d.y);});

  // second graph
  var dotTwoData = [
    {x: 10, y: 20},
    {x: 20, y: 15},
    {x: 30, y: 55},
    {x: 40, y: 22},
    {x: 50, y: 31},
    {x: 60, y: 38}
  ];
  var dot = svg.selectAll('.dot-two').data(dotTwoData);
  dot.enter()
    .append('circle')
      .attr('class', 'dot-two')
      .attr('r', 10)
      .attr('fill', 'red')
      .attr('cx', function (d) {return x(d.x);})
      .attr('cy', function (d) {return y(d.y);});

  svg.append('g').call(xAxis);
  svg.append('g').call(yAxis);

  // Now that the graphs are setup we can create and configure the tooltip.
  var tooltip = d2b.tooltipAxis()
      // .tracker(svg)
      .title(function (items) {return items[0].x;})
      .x(function (d) {return x(d.x);})
      .y(function (d) {return y(d.y);})
      .svgContainer(svgContainer)
      // .htmlContainer(d3.select('body'))
      .size({width: width, height: height})
      .trackX(true)
      .trackY(false);

  // tooltip.clear();
  // tooltip.clear('dot');
  // tooltip.clear('dot', 'one');

  tooltip.graph('dot', 'one')
      .row(function (d) {return 'One - '+d.y;})
      .color('blue')
      .data(dotOneData);

  tooltip.graph('dot', 'two')
      .row(function (d) {return 'Two - '+d.y;})
      .color('red')
      .data(dotTwoData);

  // tooltip.clear('dot', 'one');
</script>

</body>
</html>
