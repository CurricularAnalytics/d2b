<!DOCTYPE html>
<html>
<script src="https://d3js.org/d3.v4.0.0-alpha.29.min.js"></script>

<link rel="stylesheet" type="text/css" href="../../build/d2b.css" />
<script src="../../build/d2b.js"></script>

<style>
	.legend{
		background: #ddd;
	}
	body{
		margin: 0;
		padding: 0;
		font-family: 'Droid Sans';
	}
</style>

<body>

	<svg class = 'legend'></svg>
	<script>
		var maxSize = function () {
			return {
				width: window.innerWidth,
				height: window.innerHeight,
			}
		};

	  var data = [
	    {label: 'Item 1 Long One', empty: false, active: true, clickable: true, dblclickable: true},
	    {label: 'Item 2', empty: true, active: true, clickable: true, dblclickable: true},
	    {label: 'Item 3 Here is a Longer One', empty: false, active: true, clickable: true, dblclickable: true},
	    {label: 'Item 4 Another', empty: true, active: true, clickable: true, dblclickable: true},
	    {label: 'Item 5', empty: true},
	    {label: 'Item 6 More', empty: false},
	    {label: 'Item 7', empty: false},
	  ];

		var legend = d2b.legend()
			.itemSize(16)
			.active(true)
			.clickable(d => d.clickable)
			.dblclickable(d => d.dblclickable)
			.maxTextLength(10)
			.orient('vertical center right');

		var legendSvg = d3.select('.legend').datum(data);

		legendSvg.on('change', function (d, i) {console.log(this, d, i)})

		var legendUpdate = function () {
			var size = maxSize();
			var transition = legendSvg.transition().call(legend.size(size));
			// var computedSize = legend.computedSize(legendSvg);
			legendSvg.attr('width', size.width).attr('height', size.height);
		};

		legendUpdate();
		window.onresize = legendUpdate;

	</script>

</body>
</html>
